---
title: ğŸŒŒ Pythonæ‰“åŒ…è‡ªå·±çš„åº“
comments: true
---

## å£¹ä¸¨å‡†å¤‡å·¥ä½œ

ç¬¬ä¸€æ­¥ï¼Œè®¾ç½®ç›®å½•ç»“æ„ï¼Œå¦‚ï¼š

```bash
./
â”œâ”€â”€ example_pkg
â”‚   â””â”€â”€ __init__.py
â””â”€â”€ setup.py
```

ç¬¬äºŒæ­¥ï¼Œç¼–è¾‘`example_pkg/__init__.py`ï¼Œå†™å…¥ï¼š

```python
__name__ = 'example_pkg'
```

ç¬¬ä¸‰æ­¥ï¼Œç¼–è¾‘`./setup.py`

> `setup.py`æ˜¯`setuptools`çš„æ„å»ºè„šæœ¬ï¼Œç”¨äºç¼–è¾‘ä¸Šä¼ åˆ°PyPiçš„åº“ä¿¡æ¯

ç¤ºä¾‹ï¼š

```python
import setuptools

with open("README.md", "r") as fh:
    long_description = fh.read()

setuptools.setup(
    name="example-pkg-your-username",
    version="0.0.1",
    author="Example Author",
    author_email="author@example.com",
    description="A small example package",
    long_description=long_description,
    long_description_content_type="text/markdown",
    url="https://github.com/pypa/sampleproject",
    packages=setuptools.find_packages(),
    install_requires=[
        'numpy',
        'pandas',
    ],
    classifiers=[
        "Programming Language :: Python :: 3",
        "License :: OSI Approved :: MIT License",
        "Operating System :: OS Independent",
    ],
)
```

å‚æ•°è§£æï¼š

| å‚æ•°                            | è§£æ                                        |
| ------------------------------- | ------------------------------------------- |
| `name`                          | åº“å                                        |
| `version`                       | ç‰ˆæœ¬å·                                      |
| `author`                        | ä½œè€…                                        |
| `author_email`                  | ä½œè€…é‚®ç®±                                    |
| `description`                   | åº“æè¿°                                      |
| `long_description`              | è¯¦ç»†æè¿°ï¼ˆä¸€èˆ¬å†™åœ¨README.mdä¸­ï¼‰             |
| `long_description_content_type` | README.mdä¸­æè¿°è¯­æ³•ï¼Œä¸€èˆ¬ä¸ºmarkdown         |
| `url`                           | é¡¹ç›®ä¸»é¡µï¼Œä¸€èˆ¬æ”¾åº“æ‰˜ç®¡çš„GitHubåœ°å€          |
| `packages`                      | ä½¿ç”¨`setuptools.find_packages()`å³å¯        |
| `install_requires`              | åº“ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“                            |
| `classifiers`                   | æŒ‡å®šåº“ä¾èµ–çš„Pythonç‰ˆæœ¬ã€Licenseã€æ“ä½œç³»ç»Ÿç­‰ |

ç¬¬å››æ­¥ï¼Œåˆ›å»º`./README.md`ï¼Œå†™å…¥è‡ªå·±å¯¹è¯¥åº“çš„ç®€ä»‹ã€æè¿°

ç¬¬äº”æ­¥ï¼Œåˆ›å»º`./LICENSE`ï¼Œåˆ›å»ºå¼€æºåè®®

## è´°ä¸¨æ‰“åŒ…åº“[^1]

é¦–å…ˆï¼Œç¡®ä¿å®‰è£…äº†æœ€æ–°çš„`setuptools`ã€`wheel`ã€`twine`ï¼š

```bash
python -m pip install --user --upgrade setuptools wheel twine
```

ç„¶åï¼Œæ‰“åŒ…åº“ï¼š

```bash
python setup.py sdist bdist_wheel
```

ç„¶åå°±ä¼šçœ‹åˆ°ï¼š

```
â”œâ”€â”€ dist
â”‚   â”œâ”€â”€ example_pkg-0.0.1-py3-none-any.whl
â”‚   â””â”€â”€ example_pkg-0.0.1.tar.gz
â”œâ”€â”€ example_pkg
â”‚   â””â”€â”€ __init__.py
â””â”€â”€ setup.py
```

æœ€åï¼Œä½¿ç”¨twineå°†æ‰“åŒ…å¥½çš„åº“ä¸Šä¼ åˆ°PyPiæµ‹è¯•æœ

```bash
python -m twine upload --repository-url https://test.pypi.org/legacy/ dist/*
```

å°†åº“ä¸Šä¼ åˆ°PyPiæ­£å¼æœ

```bash
twine upload dist/*
```

## åä¸¨å®‰è£…

å¦‚æœä¸Šä¼ åˆ°PyPiæ­£å¼æœï¼Œä½¿ç”¨`pip install xx`å³å¯æ­£å¸¸å®‰è£…

å¦‚æœä»…ä»…æœ¬åœ°ä½¿ç”¨ï¼Œåˆ™å¯ä»¥

```bash
pip install dist/example_pkg-0.0.1.tar.gz
```

[^1]: çŸ¥ä¹ï¼Œ@éœ¾å¤§ï¼Œ[Pythonæ‰“åŒ…è‡ªå·±çš„åº“åˆ°PYPIï¼ˆå¯pipå®‰è£…ï¼‰](https://zhuanlan.zhihu.com/p/79164800)